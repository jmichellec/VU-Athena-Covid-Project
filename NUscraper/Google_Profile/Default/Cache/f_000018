"use strict";var SANOMASEARCH=function(){var c,l,f={};function e(e){l=SANOMASEARCH.settings.get("site");SANOMASEARCH.settings.set("features",e);t(e,function(){SANOMASEARCH.events.init(c);SANOMASEARCH.urlParameters.init(c);SANOMASEARCH.tracking.init(c);SANOMASEARCH.ajax.init(c);if(c.inArray("autocomplete",e)!==-1){SANOMASEARCH.autocompleteModel.init(c);SANOMASEARCH.autocompleteView.init(c)}if(c.inArray("lightbox",e)!==-1||c.inArray("serp",e)!==-1){SANOMASEARCH.searchModel.init(c)}if(c.inArray("lightbox",e)!==-1){c(document).ready(function(){SANOMASEARCH.lightboxView.init(c,f["lightbox"])})}if(c.inArray("serp",e)!==-1){c(document).ready(function(){SANOMASEARCH.serpView.init(c,f["serp"])})}})}function t(e,t){var n=0,r=false,s=false,i=2;for(var a=0;a<e.length;a++){if(e[a]==="lightbox"){r=true}else if(e[a]==="serp"){s=true}}if(r){var o="lightbox";SANOMASEARCH.loadTemplate.get(o,SANOMASEARCH.settings.get("base_url")+l+"/"+o+".html",function(e,t){f[e]=t;u()});i++}if(s){var o="serp";SANOMASEARCH.loadTemplate.get(o,SANOMASEARCH.settings.get("base_url")+l+"/"+o+".html",function(e,t){f[e]=t;u()});i++}if(r||s){SANOMASEARCH.checkDependencies.get("mustache",function(){u()});i++}SANOMASEARCH.checkDependencies.get("jquery",function(e){c=e;u()});SANOMASEARCH.loadStylesheet.get(SANOMASEARCH.settings.get("base_url")+l+"/stylesheet.min.css",function(){u()});function u(){if(++n==i){t()}}}return{init:e}}();SANOMASEARCH.settings=function(){var n={};function e(e){return n[e]}function t(e,t){n[e]=t}return{get:e,set:t}}();(function(){"use strict";SANOMASEARCH.settings.set("base_url","//sss.snmmd.nl/");SANOMASEARCH.settings.set("jquery_src","//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js");SANOMASEARCH.settings.set("mustache_src","//cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min.js");SANOMASEARCH.settings.set("search_src","//search.snmmd.nl/search/")})();(function(){"use strict";SANOMASEARCH.settings.set("site","nu2")})();SANOMASEARCH.checkDependencies=function(){var n={jquery:function(e){if(window.jQuery){e(window.jQuery)}else{t()}function t(){SANOMASEARCH.loadScript.get(SANOMASEARCH.settings.get("jquery_src"),function(){jQuery=jQuery.noConflict();e(jQuery)})}},mustache:function(e){if(typeof Mustache==="undefined"){SANOMASEARCH.loadScript.get(SANOMASEARCH.settings.get("mustache_src"),function(){e()})}}};function e(e,t){n[e](t)}return{get:e}}();SANOMASEARCH.loadScript=function(){function e(e,t){var n=document.createElement("script");if(n.readyState){n.onreadystatechange=function(){if(n.readyState=="loaded"||n.readyState=="complete"){n.onreadystatechange=null;t()}}}else{n.onload=function(){t()}}n.src=e;document.getElementsByTagName("head")[0].appendChild(n)}return{get:e}}();SANOMASEARCH.loadTemplate=function(){function e(t,e,n){SANOMASEARCH.ajax.get({url:e,success:function(e){n(t,e)}})}return{get:e}}();SANOMASEARCH.loadStylesheet=function(){function e(e,t){var n=document.createElement("link");n.rel="stylesheet";n.type="text/css";n.href=e;document.getElementsByTagName("head")[0].appendChild(n);t()}return{get:e}}();SANOMASEARCH.events=function(){var t;return{init:function(e){t=e({})},subscribe:function(){t.on.apply(t,arguments)},unsubscribe:function(){t.off.apply(t,arguments)},publish:function(){t.trigger.apply(t,arguments)}}}();"use strict";SANOMASEARCH.tracking=function(){var u,c={},n=new RegExp("acid[0-9]+"),l={zlostat:function(e){return;var t=new Image(1,1);t.src="//dispatch.ilsemedia.nl/?a="+e+"&b=1&uni="+(new Date).getTime()},sac:function(e,t){t["current_url"]=document.location.href;t["viewport"]=u(window).width()+"x"+u(window).height();t["screen"]=screen.width+"x"+screen.height;t["has_search"]=u.inArray("serp",SANOMASEARCH.settings.get("features"))!=-1||u.inArray("lightbox",SANOMASEARCH.settings.get("features"))!=-1;t["source"]=c.source;if(c.query){t["query"]=c.query}var n={};u.each(t,function(e,t){if(t!==undefined&&t!==""){n[e]=t}});if(typeof window.sat=="object"&&typeof window.sat.event=="function"){window.sat.event(e,n)}}};function s(e){var t=e.match(n)||[];return t[0]}function e(e){u=e;var t=u.inArray("serp",SANOMASEARCH.settings.get("features"))!=-1,n=u.inArray("lightbox",SANOMASEARCH.settings.get("features"))!=-1;c.source=t?"serp":n?"lightbox":undefined;if(t||n){u("body").on("click",".js-track",function(e){var t=u(e.target).is(".js-track")?u(e.target):u(e.target).parents(".js-track"),n=t.data();if(t.attr("href")){n["link_url"]=t.attr("href");n["acid"]=s(t.attr("href"))}var r=n["event"]||"c";delete n["event"];l.sac(r,n);if(t.attr("target")=="_self"){e.preventDefault();setTimeout(function(){window.location.href=t.attr("href")},200)}})}SANOMASEARCH.events.subscribe("search",function(e,t){c.query=t["query"]});var o=SANOMASEARCH.urlParameters.get("ss_clickdata");var r=function(e,t){if(!t.search_results){return}var n=c.autocomplete_target?"Google suggestion click: "+c.autocomplete_source:"Search query input",r=!!(t["search_results"]&&t["search_results"]["data"]&&t["search_results"]["data"]["column_organic"]),s=!!(t["search_results"]&&t["search_results"]["data"]&&t["search_results"]["data"]["column_right"]),i=SANOMASEARCH.siteHelpers.addTrackData(u,"q",{action:n,has_results:r||s,has_curated:s,has_organic:r,search_page_id:s?f(t["search_results"]["data"]["column_right"]):undefined,referrer:document.referrer,clickdata:o},t,r,s),a=function(){l.sac("q",i)};o=undefined;if(u.inArray("serp",SANOMASEARCH.settings.get("features"))!=-1){a()}else{if(c.timeout){clearInterval(c.timeout)}c.timeout=setTimeout(a,1e3)}};SANOMASEARCH.events.subscribe("search-results-found",r);SANOMASEARCH.events.subscribe("search-results-not-found",r);SANOMASEARCH.events.subscribe("lightbox-close",function(e,t){l.sac("a",{action:"lightbox sluiten",close_action:t["action"]})});SANOMASEARCH.events.subscribe("exitcross",function(e,t){l.sac("a",{action:"exitcross"})});SANOMASEARCH.events.subscribe("autocomplete-query-changed",function(e,t){if(t!=c.autocomplete_target){c.autocomplete_source=t;c.autocomplete_target=undefined}});SANOMASEARCH.events.subscribe("autocomplete-click",function(e,t){c.autocomplete_target=t.query});SANOMASEARCH.events.subscribe("autocomplete-navigate",function(e,t){c.autocomplete_target=t.query})}function f(e){for(var t=0;t<e.length;t++){if(e[t].links){for(var n=0;n<e[t].links.length;n++){for(var r=0;r<e[t].links[n].length;r++){if(e[t].links[n][r].page_id){return e[t].links[n][r].page_id}}}}}}return{init:e}}();SANOMASEARCH.ajax=function(){var n;function e(e){n=e}function t(e){if(!r(e.url)&&window.XDomainRequest!==undefined){window.xdr=new XDomainRequest;for(variable in e.data){e.url+=e.url.indexOf("?")===-1?"?":"&";e.url+=encodeURIComponent(variable)+"="+encodeURIComponent(e.data[variable])}xdr.open("GET",e.url);xdr.onload=function(){if(s(xdr.responseText)){e.success(JSON.parse(xdr.responseText))}else{e.success(xdr.responseText)}};setTimeout(function(){xdr.send()},0)}else if(n&&n.ajax){return n.ajax(e)}else{var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200){e.success(t.responseText)}};t.open("GET",e.url,true);t.send()}}function r(e){var t=document.createElement("a");t.href=e;return t.hostname+""===window.location.hostname+""}function s(e){try{JSON.parse(e)}catch(e){return false}return true}return{init:e,get:t}}();SANOMASEARCH.urlParameters=function(){var t;function e(e){t=e}function n(n){var r,s=[];t.each(window.location.search.substr(1).split("&"),function(e,t){s=t.split("=");if(s[0]===n){r=decodeURIComponent(s[1])}});if(r&&r.match(/^\d+$/)){return parseInt(r,10)}else{return r}}return{init:e,get:n}}();SANOMASEARCH.viewHelpers=function(){function e(e){if(Number.prototype.toLocaleString){var t=e.toLocaleString("nl-NL");return t.replace(/\.00$/,"")}else{return e}}function t(e,t,n){return e==1?t:n}function n(){return!!(window.history&&window.history.pushState)}function r(e){if(typeof e!=="undefined"){return decodeURIComponent(e.replace(/\+/g," "))}else{return e}}function s(e,t,n){for(var r=0;r<e.length;r++){for(var s=0;s<e[r]["links"].length;s++){e[r]["links"][s][0][n]=e[r]["links"][s][0][t]}}return e}function i(e,t,n){n=n||"description";for(var r=0;r<e.length;r++){for(var s=0;s<e[r]["links"].length;s++){if(e[r]["links"][s][0][n]){e[r]["links"][s][0][n]=e[r]["links"][s][0][n].replace(new RegExp("("+t+")","gi"),'<span class="highlight">$1</span>')}}}return e}return{formatNumber:e,hasHistoryApiSupport:n,parseQuery:r,checkPlural:t,highlight:i,copy:s}}();SANOMASEARCH.siteHelpers=function(){var i=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];function e(e){var t=e.match(/(\d{2})-(\d{2})-(\d{4})/);if(t!==null){var n=+t[1],r=+t[2],s=t[3];return n+" "+i[r-1]+" "+s}else{return e}}function t(e,t,n,r,s,i){return n}return{formatDate:e,addTrackData:t}}();SANOMASEARCH.searchModel=function(){var n,u,r,s,i=200,a={},o,e;function t(e){n=e;SANOMASEARCH.events.subscribe("search",c())}function c(){return function(e,t){u=n.trim(t["query"]);r=t["page"]||1;if(s&&s.readyState!==4){s.abort()}a=n.extend(t["params"]||{},{q:u.toLowerCase(),page:r,per_page:10,channel:SANOMASEARCH.settings.get("site"),ks:0,r:1});clearTimeout(o);if(u.length<2){return SANOMASEARCH.events.publish("search-results-not-found",{query:u})}o=setTimeout(function(){s=SANOMASEARCH.ajax.get({type:"GET",dataType:"json",url:SANOMASEARCH.settings.get("search_src"),data:a,async:true,success:function(e){var t={};if(e&&e["data"]){var n=e["data"];for(var r=0;r<n.length;r++){var s=n[r]["section"];if(t[s]===undefined){t[s]=[]}t[s].push(n[r])}if(t["column_right"]){for(var i=0;i<t["column_right"].length;i++){for(var a=0;a<t["column_right"][i]["links"].length;a++){var r=t["column_right"][i]["links"][a].length;while(r--){var o=t["column_right"][i]["links"][a][r];if(o["image_size"]&&o["image_size"].match(/x194$/)){o["title"]=""}o["target"]=o["target"]=="self"?"_self":"_blank"}}}}e["data"]=t}if(t["column_organic"]&&t["column_organic"][0]&&t["column_organic"][0]["links"]&&t["column_organic"][0]["links"].length){SANOMASEARCH.events.publish("search-results-found",{query:u,search_results:e})}else{SANOMASEARCH.events.publish("search-results-not-found",{query:u,search_results:e})}},error:function(e,t){if(t!="abort"){SANOMASEARCH.events.publish("search-error",{status:t})}}})},i)}}return{init:t}}();SANOMASEARCH.autocompleteModel=function(){var i,n,r,s=200,a;function e(e){i=e;SANOMASEARCH.events.subscribe("autocomplete-query-changed",t())}function t(){return function(e,t){if(r&&r.readyState!==4){r.abort()}if(n===t){return}n=t;clearTimeout(a);if(!t.length){SANOMASEARCH.events.publish("autocomplete-results-not-found");return}a=setTimeout(function(){r=i.ajax({type:"GET",dataType:"jsonp",url:"https://suggestqueries.google.com/complete/search",data:{q:t,hl:"nl",client:"psy",inputencoding:"UTF-8",outputencoding:"UTF-8"},success:function(e){var t=[];if(e[1].length){for(var n=0;n<Math.min(3,e[1].length);n++){var r=e[1][n][0],s;s=i("<div>").html(r).text();t.push({html:r,text:s})}SANOMASEARCH.events.publish("autocomplete-results-found",{suggestions:t})}else{SANOMASEARCH.events.publish("autocomplete-results-not-found")}},error:function(){SANOMASEARCH.events.publish("autocomplete-results-not-found")}})},s)}}return{init:e}}();SANOMASEARCH.serpView=function(){var g,n,r,s,S,m,v,C,b;function e(e,t){g=e;C=SANOMASEARCH.viewHelpers.parseQuery(SANOMASEARCH.urlParameters.get("q"))||"";b=SANOMASEARCH.urlParameters.get("page")||1;if(SANOMASEARCH.viewHelpers.hasHistoryApiSupport()){window.history.replaceState({query:C,page:b},C+" - Zoeken","?q="+C+"&page="+b)}g(function(){n=g("#sanoma_search").html(t);s=n.find('input[name="q"]').val(C);s.attr("autocapitalize","off").attr("autocomplete","off").attr("autocorrect","off").attr("spellcheck",false);r=s.closest("form");S=n.find(".ss-column--organic");m=g("#sanoma_search_pagination");v={nu:g(".js-block-nu").html(),nu2:g(".js-block-nu").html(),startpagina:g(".js-block-startpagina").html(),pagination:g(".js-pagination").html(),loading:g(".js-loading").html(),"no-results-found":g(".js-no-results-found").html(),"error-message":g(".js-error-message").html()};if(SANOMASEARCH.viewHelpers.hasHistoryApiSupport()){n.on("submit",r,function(e){e.preventDefault();i(s.val(),1)});n.on("click",".js-paginate",function(e){e.preventDefault();i(s.val(),g(this).data("page"))});window.onpopstate=function(e){a(e.state.query,e.state.page)}}s.on("focus",function(){g(this).closest("search-form").addClass("active")});s.on("blur",function(){g(this).closest("search-form").removeClass("active")});g("body").on("click",".js-autocomplete",function(){s.val(decodeURIComponent(g(this).data("query")))});a(C,b,true)});SANOMASEARCH.events.subscribe("search-results-found",o());SANOMASEARCH.events.subscribe("search-results-not-found",o());SANOMASEARCH.events.subscribe("search-error",u())}function i(e,t){window.history.pushState({query:e,page:t},e+" - Zoeken","?q="+encodeURIComponent(e)+"&page="+t);a(e,t)}function a(e,t){C=e||C;b=t||b;g(".js-number-of-results-container").hide();S.empty();document.title=(C.length?C+" - ":"")+"Zoeken";window.scrollTo(0,0);if(C){S.html(v["loading"]);SANOMASEARCH.events.publish("search",{query:C,page:b});g(".js-startpagina-header").hide()}}function o(){return function(e,t){var n=0,r=true;n=t&&t["search_results"]&&t["search_results"]["meta"]?t["search_results"]["meta"]["found"]:0;if(n){g(".js-number-of-results").text(SANOMASEARCH.viewHelpers.formatNumber(n)+" "+SANOMASEARCH.viewHelpers.checkPlural(n,"resultaat","resultaten"));g(".js-query").text(C);g(".js-number-of-results-container").show();S.empty();window.create_search_list(t["search_results"]["data"]["column_organic"]);var s=t["search_results"]["meta"]["total_pages"],i="?q="+encodeURIComponent(C)+"&page=",a=[];if(s>1){var o=b,u=5,c=Math.floor(u/2),l=c,f=c;if(o>1){a.push({title:"Eerste",class:"first hidden-on-mobile",icon:"double-left",url:i+1,page:1});a.push({title:"Vorige",class:"previous hidden-on-mobile",icon:"left",url:i+(o-1),page:o-1})}if(o-1<c){l=o-1;f=u-1-l}else if(s-o<c){f=s-o;l=u-1-f}var A=Math.max(1,o-l),h=Math.min(s,o+f);for(var p=A;p<=h;p++){var d={title:p,url:i+p,page:p};if(o===p){d["class"]="current"}a.push(d)}if(o<s){a.push({title:"Volgende",class:"next hidden-on-mobile",icon:"right",url:i+(o+1),page:o+1});a.push({title:"Laatste",class:"last hidden-on-mobile",icon:"double-right",url:i+s,page:s})}m.html(Mustache.render(v["pagination"],a))}}else{S.html(v["no-results-found"])}}}function u(){return function(e,t){S.html(Mustache.render(v["error-message"],{query:C}))}}return{init:e}}();SANOMASEARCH.autocompleteView=function(){var n,t,s,i,a,r='input[name="q"]',o=-1,u=0,c,l,f=false;function e(e){n=e;c=SANOMASEARCH.urlParameters.get("q");n(function(){t=n("body");a=n('<div class="ss-autocomplete"></div>').appendTo("body");t.on("keyup paste",r,function(e){if(n.inArray(e.keyCode,[38,40])!==-1){return}if(c!==n(this).val()){c=n(this).val();SANOMASEARCH.events.publish("autocomplete-query-changed",c)}});t.on("keydown",r,function(e){f=true;if(!u||n.inArray(e.keyCode,[38,40])===-1){return}if(e.keyCode===38){o=Math.max(--o,-1);e.preventDefault()}else if(e.keyCode===40){o=Math.min(++o,u-1)}SANOMASEARCH.events.publish("autocomplete-navigate",{prev_query:s.val(),query:l["suggestions"][o]["text"],index:o})});t.on("focus",r,function(){d(this);g();if(!a.is(":empty")){a.show()}});t.on("blur",r,function(){setTimeout(function(){a.hide()},200)});t.on("submit","form",function(e){f=false;if(n(this).hasClass("js-autocomplete-form")){if(n.inArray("serp",SANOMASEARCH.settings.get("features"))!==-1){if(SANOMASEARCH.viewHelpers.hasHistoryApiSupport()){e.preventDefault()}}setTimeout(function(){a.hide()},200);if(o!==-1){SANOMASEARCH.events.publish("autocomplete-submit")}}});t.on("click",".js-autocomplete",function(e){e.preventDefault();var t=n(this).closest("li").index();SANOMASEARCH.events.publish("autocomplete-click",{prev_query:s.val(),index:t,query:l["suggestions"][t]["text"]})})});n(window).on("resize",function(){if(f){g()}});SANOMASEARCH.events.subscribe("autocomplete-results-found",A());SANOMASEARCH.events.subscribe("autocomplete-results-not-found",A());SANOMASEARCH.events.subscribe("autocomplete-navigate",p());SANOMASEARCH.events.subscribe("autocomplete-click",h())}function A(){return function(e,t){l=t;o=-1;if(typeof t!=="undefined"){u=t.suggestions.length;S();if(s.is(":focus")&&f){a.show()}}else{u=0;a.hide()}}}function h(){return function(e,t){o=t["index"];s.val(t["query"]);i.trigger("submit")}}function p(){return function(e,t){var n=t["index"];for(var r=0;r<l.suggestions.length;r++){l.suggestions[r]["active"]=n===r}if(n>-1){s.val(l.suggestions[n]["text"])}S()}}function d(e){s=n(e),s.attr("autocapitalize","off").attr("autocomplete","off").attr("autocorrect","off").attr("spellcheck",false);i=s.closest("form");i.addClass("js-autocomplete-form")}function g(){var e=0;if(n(".consent-bar-show-small, .consent-bar-show-large").length===1){e=n(".consent-bar-show-small, .consent-bar-show-large").height()}a.css("top",i.offset().top+s.outerHeight()-1-e+"px");a.css("left",i.offset().left+"px");a.css("min-width",i.width()+"px")}function S(){g();var e,t="<ul>";e=i.attr("action");e+=e.indexOf("?")===-1?"?":"&";e+="q=";for(var n=0;n<l["suggestions"].length;n++){var r=l["suggestions"][n];t+="<li";if(r["active"]){t+=' class="active"'}t+='><a class="js-autocomplete" href="'+e+encodeURIComponent(r["text"])+'" data-query="'+encodeURIComponent(r["text"])+'">'+r["html"]+"</a></li>"}t+="</ul>";a.html(t)}return{init:e}}();
//# sourceMappingURL=sanomasearch.min.map